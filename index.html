<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nuestros Recuerdos</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
</head>
<body>

  <canvas id="petalos"></canvas>

  <div class="inicio" id="inicio">
    <h1>Elige el d√≠a en que empez√≥ nuestra historia üíû</h1>
    <input type="date" id="fecha">
    <button onclick="iniciar()">Ver recuerdos</button>
  </div>

  <div class="contador" id="contador"></div>

  <div class="carrusel" id="carrusel">
    <div class="slide activo">
      <img src="imagenes/img2.jpg" alt="primera foto">
      <p>Desde nuestra primera foto juntos, supe que nuestro futuro ser√≠a hermoso.</p>
    </div>
    <div class="slide">
      <img src="imagenes/img1.jpg" alt="chico acostado">
      <p>Eres la √∫nica que me saca una sonrisa tan honesta y original.</p>
    </div>
    <div class="slide">
      <img src="imagenes/img4.jpg" alt="naturaleza">
      <p>Nuestro primer ‚Äúviaje‚Äù juntos.</p>
    </div>
    <div class="slide">
      <img src="imagenes/img3.jpg" alt="concierto">
      <p>Aunque a veces peleamos, siempre lo superaremos todo juntos.</p>
    </div>
    <div class="slide final">
      <p>CDesde el primer momento en que te vi, supe que mi coraz√≥n hab√≠a encontrado su lugar.
      Cada d√≠a a tu lado es un regalo que nunca dejar√© de agradecer.
      Este espacio es solo un reflejo de todo lo que siento por ti,
      porque no hay c√≥digo que pueda describir lo mucho que te amo. üíñ</p>
    </div>
  </div>
  <div class="mensaje-fijo">
  <p>Con todo mi amor: Tom√°s üíñ</p>
</div>
<div class="dedicatoria" id="dedicatoria">
    <p id="textoDedicatoria">
        Desde el primer momento en que te vi, supe que mi coraz√≥n hab√≠a 
        encontrado su lugar.
        Cada d√≠a a tu lado es un regalo que nunca dejar√© de agradecer.
        Este espacio es solo un reflejo de todo lo que siento por ti,
        porque no hay c√≥digo que pueda describir lo mucho que te amo. üíñ
    </p>
  </div>



  <audio id="musica" src="musica/Red Velvet.mp3" loop></audio>
  <button class="musicaBtn" id="musicaBtn">üéµ</button>

  <script>
  // --- M√∫sica ---
const musica = document.getElementById("musica");
const musicaBtn = document.getElementById("musicaBtn");
musicaBtn.addEventListener("click", () => {
  if (musica.paused) {
    musica.play();
    musicaBtn.textContent = "‚è∏Ô∏è";
  } else {
    musica.pause();
    musicaBtn.textContent = "üéµ";
  }
});

// --- Iniciar contador ---
function iniciar() {
  const fechaInput = document.getElementById("fecha").value;
  if (!fechaInput) return alert("Por favor, elige una fecha ü•∞");

  const fechaInicio = new Date(fechaInput);
  document.getElementById("inicio").style.display = "none";
  
  // MOSTRAR DEDICATORIA - FORMA DIRECTA
  const dedicatoria = document.getElementById("dedicatoria");
  dedicatoria.style.display = "block";
  dedicatoria.style.opacity = "1";

  setInterval(() => {
    const ahora = new Date();
    const diferencia = ahora - fechaInicio;

    const dias = Math.floor(diferencia / (1000 * 60 * 60 * 24));
    const horas = Math.floor((diferencia / (1000 * 60 * 60)) % 24);
    const minutos = Math.floor((diferencia / (1000 * 60)) % 60);
    const segundos = Math.floor((diferencia / 1000) % 60);

    document.getElementById("contador").textContent =
      `Juntos desde hace ${dias} d√≠as, ${horas}h ${minutos}m ${segundos}s üíû`;
  }, 1000);
}

// --- Carrusel autom√°tico con m√°s tiempo en el final ---
let indice = 0;
const slides = document.querySelectorAll(".slide");
let intervalo;

function cambiarSlide() {
  slides[indice].classList.remove("activo");
  slides[indice].classList.add("saliente");
  indice = (indice + 1) % slides.length;
  slides[indice].classList.add("entrante");
  slides[indice].classList.add("activo");

  setTimeout(() => {
    slides.forEach(s => s.classList.remove("saliente", "entrante"));
  }, 1500);

  // Si es el slide final (√∫ltimo), esperar m√°s tiempo
  if (slides[indice].classList.contains('final')) {
    clearInterval(intervalo);
    intervalo = setInterval(cambiarSlide, 15000); // 10 segundos en el final
  } else {
    clearInterval(intervalo);
    intervalo = setInterval(cambiarSlide, 4000); // 6 segundos normales
  }
}

// Iniciar el carrusel
intervalo = setInterval(cambiarSlide, 6000);

// --- P√©talos ---
const canvas = document.getElementById('petalos');
const ctx = canvas.getContext('2d');
let width = canvas.width = window.innerWidth;
let height = canvas.height = window.innerHeight;
const petalos = [];

const petaloImg = new Image();
petaloImg.src = 'cora.png';

class Petalo {
  constructor() {
    this.reset();
  }
  reset() {
    this.x = Math.random() * width;
    this.y = Math.random() * -height;
    this.size = 20 + Math.random() * 25;
    this.speed = 0.5 + Math.random() * 2;
    this.swing = Math.random() * 2; 
    this.angle = Math.random() * Math.PI * 2;
    this.rotation = Math.random() * Math.PI * 2;
    this.rotationSpeed = (Math.random() - 0.5) * 0.02;
  }
  update() {
    this.y += this.speed;
    this.x += Math.sin(this.angle) * this.swing;
    this.angle += 0.02;
    this.rotation += this.rotationSpeed;

    if (this.y > height + 30) this.reset();
  }
  draw() {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.rotate(this.rotation);
    ctx.drawImage(petaloImg, -this.size / 2, -this.size / 2, this.size, this.size);
    ctx.restore();
  }
}

for (let i = 0; i < 50; i++) petalos.push(new Petalo());

function animarPetalos() {
  ctx.clearRect(0, 0, width, height);
  petalos.forEach(p => { p.update(); p.draw(); });
  requestAnimationFrame(animarPetalos);
}

petaloImg.onload = animarPetalos;

window.addEventListener('resize', () => {
  width = canvas.width = window.innerWidth;
  height = canvas.height = window.innerHeight;
});
  </script>
  
</body>
</html>
